@using wsPLD_8.Models.Shared
@using Microsoft.AspNetCore.Identity
@inject SignInManager<Usuarios> SignInManager
@inject UserManager<Usuarios> UserManager
@inject Aplicacion<int> _aplicacion
@{
    _aplicacion = _aplicacion.ValidaUser(_aplicacion);
    if (!SignInManager.IsSignedIn(User))
    {
        ViewData["body"] = "sidebar-collapse sidebar-no-expand";
    }
    else
    {
        ViewData["body"] = "sidebar-expand-* sidebar-mini sidebar-collapse";
        //ViewData["body"] = "layout-fixed sidebar-expand-lg sidebar-open";
    }
}
<!doctype html>
<html lang="en">
<!--begin::Head-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>@_aplicacion.Name @_aplicacion.PostName @_aplicacion.Version | @_aplicacion.Menu</title>
    <!--begin::Accessibility Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#007bff" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)" />
    <!--end::Accessibility Meta Tags-->
    <!--begin::Primary Meta Tags-->
    <meta name="title" content="@_aplicacion.Name @_aplicacion.PostName @_aplicacion.Version | @_aplicacion.Menu" />
    <meta name="author" content="MI Francisco Jose Resendiz Aguilera" />
    <meta name="description"
          content="@_aplicacion.Name @_aplicacion.PostName esta hecho sobre Bootstrap 5 ." />
    <meta name="keywords"
          content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable" />
    <!--end::Primary Meta Tags-->
    <!--begin::Accessibility Features-->
    <!-- Skip links will be dynamically added by accessibility.js -->
    <meta name="supported-color-schemes" content="light dark" />
   
    <link rel="preload" href="~/dist/css/adminlte.css" as="style" />

    <!--begin::Fonts-->
    <link rel="stylesheet"
          href="~/dist/css/index.css"
          crossorigin="anonymous"
          media="print"
          onload="this.media='all'" />
    <!--end::Fonts-->

    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(OverlayScrollbars)-->

    <!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(Bootstrap Icons)-->
 
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/plugins/fontawesome-free/css/all.min.css">

    <!--begin::Required Plugin(AdminLTE)-->
    <link href="~/dist/css/adminlte.min.css" rel="stylesheet" />
    
    <!--end::Required Plugin(AdminLTE)-->

    <script src="~/lib/jquery/dist/jquery.js"></script>
</head>
<!--end::Head-->
@* 
 Barra lateral fija: utilice la clase .layout-fixed para obtener una barra lateral fija.
Mini barra lateral al activar/desactivar: utilice la clase .sidebar-expand-* .sidebar-mini para tener una barra lateral contraída al cargar la página.
Barra lateral colapsada: utilice esta clase .sidebar-expand-* .sidebar-mini .sidebar-collapse para tener una barra lateral colapsada al cargar la página. 
*@
<!--begin::Body-->
<body class="@ViewData["body"] bg-body-tertiary">
    <!--begin:Contenedor .app-wrapper. Un div que envuelve todo el sitio-->
    <div class="app-wrapper">
        <!--begin:Encabezado principal .app-header. Contiene el logotipo y la barra de navegación-->
        <nav class="app-header navbar bg-body navbar-expand" id="navigation" tabindex="-1">
            <!--begin::Container-->
            <div class="container-fluid">
                <!--begin::Start Navbar Links-->
                <ul class="navbar-nav" role="navigation" aria-label="Navigation 1">
                    @if (SignInManager.IsSignedIn(User) != true)
                    {
                        <li class="nav-item">
                            <div class="sidebar-brand">
                                <!--begin::Brand Link-->
                                <a href="./index.html" class="brand-link">
                                    <!--begin::Brand Image-->
                                    <img src="~/dist/assets/img/logo-patriare.png"
                                         alt="@_aplicacion.Name @_aplicacion.PostName Logo"
                                         class="brand-image opacity-75 shadow" />
                                    <!--end::Brand Image-->
                                    <!--begin::Brand Text-->
                                    <span class="brand-text fw-light"><b>@_aplicacion.Name @_aplicacion.PostName</b></span>
                                    <!--end::Brand Text-->
                                </a>
                                <!--end::Brand Link-->
                            </div>
                        </li>
                    }

                    @foreach (var menus in @_aplicacion.menuAppsSuperior)
                    {
                        <li class="nav-item d-none d-md-block">
                            <a href="@menus.hRef" class="nav-link" data-lte-toggle="sidebar" target="@menus.target" role="button">@menus.titulo</a>
                        </li>
                    }
                </ul>
                <!--end::Start Navbar Links-->
                <!--begin::End Navbar Links-->
                <ul class="navbar-nav ml-auto" role="navigation" aria-label="Navigation 2">
                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        <!-- Messages Dropdown Menu -->
                        <li class="nav-item dropdown">
                            <a class="nav-link" data-toggle="dropdown" href="#">
                                <i class="far fa-comments"></i>
                                <span class="badge badge-danger navbar-badge">3</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                <a href="#" class="dropdown-item">
                                    <!-- Message Start -->
                                    <div class="media">
                                        <img src="~/dist/assets/img/usr-@_aplicacion.UsrId-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                        <div class="media-body">
                                            <h3 class="dropdown-item-title">
                                                Brad Diesel
                                                <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                                            </h3>
                                            <p class="text-sm">Call me whenever you can...</p>
                                            <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                        </div>
                                    </div>
                                    <!-- Message End -->
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">
                                    <!-- Message Start -->
                                    <div class="media">
                                        <img src="~/dist/assets/img/usr-8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                        <div class="media-body">
                                            <h3 class="dropdown-item-title">
                                                John Pierce
                                                <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                                            </h3>
                                            <p class="text-sm">I got your message bro</p>
                                            <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                        </div>
                                    </div>
                                    <!-- Message End -->
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">
                                    <!-- Message Start -->
                                    <div class="media">
                                        <img src="~/dist/assets/img/usr-3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                        <div class="media-body">
                                            <h3 class="dropdown-item-title">
                                                Nora Silvester
                                                <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                                            </h3>
                                            <p class="text-sm">The subject goes here</p>
                                            <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                        </div>
                                    </div>
                                    <!-- Message End -->
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                            </div>
                        </li>
                        <!-- Notifications Dropdown Menu -->
                        <li class="nav-item dropdown">
                            <a class="nav-link" data-toggle="dropdown" href="#">
                                <i class="far fa-bell"></i>
                                <span class="badge badge-warning navbar-badge">15</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                <span class="dropdown-item dropdown-header">15 Notifications</span>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-envelope mr-2"></i> 4 new messages
                                    <span class="float-right text-muted text-sm">3 mins</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-users mr-2"></i> 8 friend requests
                                    <span class="float-right text-muted text-sm">12 hours</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-file mr-2"></i> 3 new reports
                                    <span class="float-right text-muted text-sm">2 days</span>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                            </div>
                        </li>
                    }
                    <li class="nav-item">
                        <partial name="_LoginPartial" />
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
                            <i class="fas fa-th-large"></i>
                        </a>
                    </li>
                </ul>
                <!--end::End Navbar Links-->
            </div>
            <!--end::Container-->
        </nav>
        <!--end::Header-->
        @if (SignInManager.IsSignedIn(User))
        {
            <!--begin:Barra lateral principal .app-sidebar. Contiene el panel de usuario y el menú de la barra lateral-->
            <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
                <!--begin::Sidebar Brand-->
            <div class="sidebar-brand">
                <!--begin::Brand Link-->
                <a href="./index.html" class="brand-link">
                    <!--begin::Brand Image-->
                    <img src="~/dist/assets/img/logo-patriare-blanco.png"
                         alt="@_aplicacion.Name @_aplicacion.PostName Logo"
                         class="brand-image opacity-75 shadow" />
                    <!--end::Brand Image-->
                    <!--begin::Brand Text-->
                        <span class="brand-text fw-light"><b>@_aplicacion.Name @_aplicacion.PostName</b></span>
                    <!--end::Brand Text-->
                </a>
                <!--end::Brand Link-->
            </div>
            <!--end::Sidebar Brand-->
                <div class="sidebar-brand">
                    <!--begin::Brand Link-->
                    <a class="brand-link">
                        <!--begin::Brand Image-->
                        <img src="/dist/assets/img/usr-@_aplicacion.UsrId-128x128.jpg"
                             alt="@_aplicacion.NormalizedUsrName Logo"
                             class="brand-image opacity-75 shadow rounded-circle" />
                        <!--end::Brand Image-->
                        <!--begin::Brand Text-->
                        <span class="brand-text fw-light"><b>@_aplicacion.NormalizedUsrName</b></span>
                        <!--end::Brand Text-->
                    </a>
                    <!--end::Brand Link-->
                </div>
            <!-- Sidebar -->
            <div class="sidebar-wrapper">

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                       
                    <ul class="nav sidebar-menu flex-column"
                        data-lte-toggle="treeview"
                        role="navigation"
                        aria-label="Main navigation"
                        data-accordion="false"
                        id="navigation">
                            
                        <!-- Add icons to the links using the .nav-icon class
                                 with font-awesome or any other icon font library -->
                        @foreach (var menus in _aplicacion.menusApp)
                        {
                            @if (menus.tab.Length > 0)
                            {
                                <li class="nav-header">@menus.tab</li>
                            }
                            <li class="nav-item">
                                <a href="@menus.hRef" class="nav-link" target="@menus.target">
                                    <i class="nav-icon fas text-lightblue @menus.icon"></i>
                                    <p>
                                        @menus.titulo
                                        @if (menus.Items.Count > 0)
                                        {
                                            <i class="right fas fa-angle-left"></i>
                                        }
                                        else if (menus.span != null)
                                        {
                                            <span class="badge badge-info right">@menus.span</span>
                                        }
                                    </p>
                                </a>
                                @if (menus.Items.Count > 0)
                                {
                                    <ul class="nav nav-treeview">
                                        @foreach (var menu in @menus.Items)
                                        {
                                            <li class="nav-item">
                                                <a href="@menu.hRef" class="nav-link" target="@menu.target">
                                                    <i class="far nav-icon @menu.icon text-info"></i>
                                                    <p>
                                                        @menu.titulo
                                                        @if (menu.span != null)
                                                        {
                                                            <span class="badge badge-info right">@menu.span</span>
                                                        }
                                                    </p>
                                                </a>
                                            </li>
                                        }
                                    </ul>
                                }
                            </li>
                        }
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>
        }
        <!--end::Sidebar-->
        <!--begin:Contenido .app-main. Contiene el encabezado y el contenido de la página.-->
        <main class="app-main">
            <!--begin::App Content Header-->
            <div class="app-content-header">
                <!--begin::Container-->
                <div class="container-fluid">
                    <!--begin::Row-->
                    <div class="row">
                        <div class="col-sm-6"><h3 class="mb-0">@_aplicacion.Menu</h3></div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-end">
                                <li class="breadcrumb-item"><a href="/Home">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">@_aplicacion.Menu</li>
                            </ol>
                        </div>
                    </div>
                    <!--end::Row-->
                </div>
                <!--end::Container-->
            </div>
            <!--end::App Content Header-->
            <!--begin::App Content-->
            <div class="app-content">
                <!--begin::Container-->
                <div class="container-fluid">

                    <div class="card card-primary card-outline">
                        <!--begin::Header-->
                        <div class="card-header" style="background-color:#dee7fc"><div class="card-title"><b>@_aplicacion.Titulo</b></div></div>
                        <!--end::Header-->
                        <!--begin::Body-->
                        <div class="card-body">
                            @RenderBody()
                        </div>
   @*                      <div class="card-footer">
                            Submit
                        </div> *@
                        
                    </div>
                </div>
                <!--end::Container-->
            </div>
            <!--end::App Content-->
        </main>
        <!--end::App Main-->
        <!--begin:Pie de página principal .app-footer. Contiene el pie de página-->
        <footer class="app-footer" style="background-color:#dee7fc">
            <!--begin::To the end-->
            <div class="float-end d-none d-sm-inline"><b>Version </b>@_aplicacion.Version</div>
            <!--end::To the end-->
            <!--begin::Copyright-->
            <strong>
                Copyright &copy; 2024-2025&nbsp;
                <a href="https://adminlte.io" class="text-decoration-none">@_aplicacion.Name @_aplicacion.PostName</a>.
            </strong>
            All rights reserved.
            <!--end::Copyright-->
        </footer>
        <!--end::Footer-->
    </div>
    <!--end::App Wrapper-->
    <!--begin::Script-->
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js"
            crossorigin="anonymous"></script>
    <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
    <script src="~/dist/js/popper.min.js"
            crossorigin="anonymous"></script>
    <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js"
            crossorigin="anonymous"></script>
    <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
    <script src="~/dist/js/adminlte.js"></script>
    <script src="~/dist/js/general.js"></script>
    <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
    <script>
        const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
        const Default = {
          scrollbarTheme: 'os-theme-light',
          scrollbarAutoHide: 'leave',
          scrollbarClickScroll: true,
        };
        document.addEventListener('DOMContentLoaded', function () {
          const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
          if (sidebarWrapper && OverlayScrollbarsGlobal?.OverlayScrollbars !== undefined) {
            OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
              scrollbars: {
                theme: Default.scrollbarTheme,
                autoHide: Default.scrollbarAutoHide,
                clickScroll: Default.scrollbarClickScroll,
              },
            });
          }
        });
    </script>
    <!--end::OverlayScrollbars Configure-->
</body>
<!--end::Body-->
</html>
